. bin/vars

set -e

CMD=${*:-bash}
if [ "$CMD" == "help" ] || [ "$CMD" == "--help" ] || [ "$CMD" == "-h" ]; then
  echo "USAGE"
  echo "  $0 [command]"
  echo 
  echo "  command is 'bash' by default"
  echo
  echo "EXAMPLES"
  echo
  echo "  bin/sh         # run bash in the Docker container"
  echo "  bin/sh ls -ltr # run ls -ltr in the Docker container"
else
  echo "ğŸ¬ Starting your Docker container tagged '${TAG}'"
  echo 
  echo "ğŸ—„ /workdir inside the container IS this local directory you are in"
  echo "ğŸŒ localhost:$LOCAL_PORT will forward to this Docker container's port $EXPOSE"
  echo
  docker rm $TAG > /dev/null 2>&1 && echo "ğŸ˜µ  Removed previous container (which is fine, no worries)" || echo "ğŸ¤·â€â™€ï¸ No previous container (it's fine, just letting you know) ğŸ¤·â€â™‚ï¸"
  docker run --name $TAG --interactive -p $LOCAL_PORT:$EXPOSE --tty --mount type=bind,source=`pwd`/,destination=$WORKDIR $TAG $CMD
fi

# vim: ft=bash
